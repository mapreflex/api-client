<!DOCTYPE html>
<html lang="en">
<head>
  <title>Mapreflex client Demo</title>
  <style>
    #map {
      height: 500px;
    }
  </style>
</head>
<body>
<!-- Your regular body -->
<script type="text/javascript" src="dist/mapreflex-client.umd.js"></script>
</body>
<div id="map"></div>
<script type="text/javascript">
  var map;
  var api = new MapreflexClient({apiKey: 'MAPREFLEX_KEY'});

  function initMap() {
    var zoom = 12;
    var areasStyleOptions = {
      strokeColor: '#6e696c',
      fillColor: '#ff6d00'
    };
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 40.730610, lng: -73.935242}, // New Your city coordinates
      zoom: zoom
    });
    map.data.setStyle(function (feature) {
      return {
        strokeColor: areasStyleOptions.strokeColor,
        fillColor: areasStyleOptions.fillColor,
        strokeWeight: 1.4,
        strokeOpacity: 0.5,
        fillOpacity: 0.2
      }
    });
    google.maps.event.addListener(map, "idle", function () {
      var sw = map.getBounds().getSouthWest();
      var ne = map.getBounds().getNorthEast();
      var northEase = [ne.lat(), ne.lng()];
      var sonthwest = [sw.lat(), sw.lng()];
      api.zctas.getInBoundingBox(northEase, sonthwest)
        .then(function (geojson) {
          drawBoundaries(geojson, map);
          // console.log(geojson);
        }, function (err) {
          console.log(err.message);
        })
    });
  }

  function drawBoundaries(goeJson, map) {
    map.data.addGeoJson(goeJson, {idPropertyName: "geoid"});
  }
  api.states.getByStateAb('NY').then(function (res) {
    console.log(res)
  });
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=GOOGLE_API_KEY&callback=initMap" async
        defer></script>
</html>
